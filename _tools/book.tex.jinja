\documentclass[{{ style.base_font_size }}, {{ "twoside" if style.twoside else "oneside" }}]{ {{- style.documentclass -}} }

\usepackage{fontspec}
\usepackage{tocloft}
\usepackage{multicol}
\usepackage[left={{ style.geometry.left }},right={{ style.geometry.right }},top={{ style.geometry.top }},bottom={{ style.geometry.bottom }}]{geometry}
\setmainfont[Scale={{ style.font.scale }},AutoFakeBold={{ style.font.auto_fake_bold }},AutoFakeSlant={{ style.font.auto_fake_slant }}]{ {{- style.font.family -}} }

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{} % Clear all header/footer fields
\fancyhead[L]{ {{- title -}} } % Book title always on left
\fancyhead[R]{\leftmark} % Chapter name always on right
\fancyfoot[C]{\thepage} % Center page number in footer
\renewcommand{\headrulewidth}{0.4pt} % Add header rule
\renewcommand{\footrulewidth}{0pt} % Remove footer rule

{% for package in packages %}
{% if package not in ['fontspec', 'tocloft', 'multicol', 'geometry'] %}
\usepackage{ {{- package -}} }
{% endif %}
{% endfor %}

\title{ {{- title -}} }
\author{ {{- authorship.author -}} }
\date{ {{- authorship.version -}} }

\begin{document}

% Title page
\maketitle
\thispagestyle{empty}
\vspace*{\fill}
\begin{center}
    Copyright Â© {{ authorship.copyright }} {{ authorship.author }}\\
    All rights reserved.
\end{center}

% Table of contents
\newpage 
\tableofcontents
\vspace*{\fill}
\hrulefill
\vspace*{\fill}
\newpage

{% for section_name, recipes in sections.items() %}
\chapter{ {{- section_name|upper -}} }
\thispagestyle{empty}
\markboth{ {{- section_name|upper -}} }{ {{- section_name|upper -}} }
\vspace*{\fill}
\hrulefill
\vspace*{\fill}
\newpage
\thispagestyle{fancy}
{% for recipe in recipes %}
\begin{center}
\huge{ {{- recipe.title -}} } 
\normalsize
\end{center}
\addcontentsline{toc}{section}{ {{- recipe.title -}} }
\input{ {{- recipe.extracted_body -}} }
\vspace*{\fill}
\hrulefill
\vspace*{\fill}
\newpage 
{% endfor %}
{% endfor %}

% Index
\printindex

\end{document} 